<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>framework.scopes</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library framework.scopes</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Lists.List.html#"><span class="id" title="library">List</span></a> <a class="idref" href="framework.maps.html#"><span class="id" title="library">maps</span></a>.<br/>
<span class="id" title="keyword">Export</span> <span class="id" title="var">ListNotations</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">inv</span> <span class="id" title="var">H</span> := (<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>).<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">sgauto</span> := <span class="id" title="var">autounfold</span> <span class="id" title="keyword">with</span> <span class="id" title="var">sgraph</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">sgraph</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab1"></a><h1 class="section">Basic Definitions</h1>

<div class="paragraph"> </div>

 We define scope identifiers, declarations, and labels used in the
definition of scope graphs below (corresponding to the definition in
Fig. 5 in the paper) 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="ident"><span class="id" title="definition">ident</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="framework.scopes.html#R"><span class="id" title="inductive">R</span></a></span>eferences, given by a name <span class="inlinecode"><a class="idref" href="framework.scopes.html#ident"><span class="id" title="definition">ident</span></a></span>ifier and an AST position. 
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a name="R"><span class="id" title="inductive">R</span></a> :=<br/>
&nbsp;&nbsp;<a name="Re"><span class="id" title="constructor">Re</span></a>: <a class="idref" href="framework.scopes.html#ident"><span class="id" title="definition">ident</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="framework.scopes.html#R"><span class="id" title="inductive">R</span></a>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="Rdec"><span class="id" title="lemma">Rdec</span></a>: <span class="id" title="keyword">∀</span> (<span class="id" title="var">r1</span> <span class="id" title="var">r2</span>:<a class="idref" href="framework.scopes.html#R"><span class="id" title="inductive">R</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="framework.scopes.html#r1"><span class="id" title="variable">r1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.scopes.html#r2"><span class="id" title="variable">r2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="framework.scopes.html#r1"><span class="id" title="variable">r1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="framework.scopes.html#r2"><span class="id" title="variable">r2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="var">decide</span> <span class="id" title="var">equality</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="framework.scopes.html#D"><span class="id" title="inductive">D</span></a></span>eclarations, given by a name <span class="inlinecode"><a class="idref" href="framework.scopes.html#ident"><span class="id" title="definition">ident</span></a></span>ifier and an AST
position. 
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a name="D"><span class="id" title="inductive">D</span></a> :=<br/>
&nbsp;&nbsp;<a name="De"><span class="id" title="constructor">De</span></a> : <a class="idref" href="framework.scopes.html#ident"><span class="id" title="definition">ident</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="framework.scopes.html#D"><span class="id" title="inductive">D</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="Ddec"><span class="id" title="lemma">Ddec</span></a>: <span class="id" title="keyword">∀</span> (<span class="id" title="var">d1</span> <span class="id" title="var">d2</span>:<a class="idref" href="framework.scopes.html#D"><span class="id" title="inductive">D</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="framework.scopes.html#d1"><span class="id" title="variable">d1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.scopes.html#d2"><span class="id" title="variable">d2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="framework.scopes.html#d1"><span class="id" title="variable">d1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="framework.scopes.html#d2"><span class="id" title="variable">d2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="var">decide</span> <span class="id" title="var">equality</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="ScopeId"><span class="id" title="definition">ScopeId</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="ScopeIdDec"><span class="id" title="lemma">ScopeIdDec</span></a>: <span class="id" title="keyword">∀</span> (<span class="id" title="var">s1</span> <span class="id" title="var">s2</span>:<a class="idref" href="framework.scopes.html#ScopeId"><span class="id" title="definition">ScopeId</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="framework.scopes.html#s1"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.scopes.html#s2"><span class="id" title="variable">s2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="framework.scopes.html#s1"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="framework.scopes.html#s2"><span class="id" title="variable">s2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="var">decide</span> <span class="id" title="var">equality</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="framework.scopes.html#EdgeLabel"><span class="id" title="inductive">EdgeLabel</span></a></span>s (corresponds to <i>Label</i> in Fig. 5 in the paper). 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a name="EdgeLabel"><span class="id" title="inductive">EdgeLabel</span></a> := <a name="P"><span class="id" title="constructor">P</span></a> | <a name="I"><span class="id" title="constructor">I</span></a>. 
<br/>
<span class="id" title="keyword">Lemma</span> <a name="ELdec"><span class="id" title="lemma">ELdec</span></a> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">l1</span> <span class="id" title="var">l2</span>: <a class="idref" href="framework.scopes.html#EdgeLabel"><span class="id" title="inductive">EdgeLabel</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="framework.scopes.html#l1"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.scopes.html#l2"><span class="id" title="variable">l2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="framework.scopes.html#l1"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="framework.scopes.html#l2"><span class="id" title="variable">l2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="var">decide</span> <span class="id" title="var">equality</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="framework.scopes.html#path"><span class="id" title="inductive">path</span></a></span>s (corresponding to Fig. 6 in the paper). 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a name="path"><span class="id" title="inductive">path</span></a> :=<br/>
| <a name="Dp"><span class="id" title="constructor">Dp</span></a> : <a class="idref" href="framework.scopes.html#D"><span class="id" title="inductive">D</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="framework.scopes.html#path"><span class="id" title="inductive">path</span></a><br/>
| <a name="Ep"><span class="id" title="constructor">Ep</span></a> : <a class="idref" href="framework.scopes.html#EdgeLabel"><span class="id" title="inductive">EdgeLabel</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="framework.scopes.html#ScopeId"><span class="id" title="definition">ScopeId</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="framework.scopes.html#path"><span class="id" title="inductive">path</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="framework.scopes.html#path"><span class="id" title="inductive">path</span></a><br/>
.<br/>

<br/>
</div>

<div class="doc">
Extracting the target declaration from a path. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="declofPath"><span class="id" title="definition">declofPath</span></a> (<span class="id" title="var">p</span>:<a class="idref" href="framework.scopes.html#path"><span class="id" title="inductive">path</span></a>) : <a class="idref" href="framework.scopes.html#D"><span class="id" title="inductive">D</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="framework.scopes.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="framework.scopes.html#Dp"><span class="id" title="constructor">Dp</span></a> <span class="id" title="var">d</span> ⇒ <span class="id" title="var">d</span><br/>
&nbsp;&nbsp;| <a class="idref" href="framework.scopes.html#Ep"><span class="id" title="constructor">Ep</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">p</span> ⇒ <a class="idref" href="framework.scopes.html#declofPath"><span class="id" title="definition">declofPath</span></a> <a class="idref" href="framework.scopes.html#p"><span class="id" title="variable">p</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab2"></a><h1 class="section">Scope graphs.</h1>


<div class="paragraph"> </div>

We use a type class to package <span class="inlinecode"><span class="id" title="keyword">Scope</span></span> and <span class="inlinecode"><a class="idref" href="framework.scopes.html#graph"><span class="id" title="method">graph</span></a></span> so that Coq can
automatically infer the <span class="inlinecode"><a class="idref" href="framework.scopes.html#DData"><span class="id" title="variable">DData</span></a></span> type from the context; this provides
similar type inference convenience as Canonical Structures.

<div class="paragraph"> </div>

The <span class="inlinecode"><a class="idref" href="framework.scopes.html#DData"><span class="id" title="variable">DData</span></a></span> type will be instantiated with pairs of optional
associated scopes and types later. Having <span class="inlinecode"><a class="idref" href="framework.scopes.html#DData"><span class="id" title="variable">DData</span></a></span> as a type parameter
is a generalization that we expect to exploit in future work. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Class</span> <a name="Graph"><span class="id" title="record">Graph</span></a> {<span class="id" title="var">DData</span>: <span class="id" title="keyword">Type</span>} :=<br/>
&nbsp;&nbsp;{<br/>
</div>

<div class="doc">
A <span class="inlinecode"><span class="id" title="keyword">Scope</span></span> consists of:

<div class="paragraph"> </div>

<ul class="doclist">
<li> A finite map from <span class="inlinecode"><a class="idref" href="framework.scopes.html#R"><span class="id" title="inductive">R</span></a></span>eferences to their resolution <span class="inlinecode"><a class="idref" href="framework.scopes.html#path"><span class="id" title="inductive">path</span></a></span>s.

<div class="paragraph"> </div>


</li>
<li> A finite map from <span class="inlinecode"><a class="idref" href="framework.scopes.html#D"><span class="id" title="inductive">D</span></a></span>eclarations to associated <span class="inlinecode"><a class="idref" href="framework.scopes.html#DData"><span class="id" title="variable">DData</span></a></span>, which is a
  kept as a parameter of this definition.

<div class="paragraph"> </div>


</li>
<li> A finite map from <span class="inlinecode"><a class="idref" href="framework.scopes.html#EdgeLabel"><span class="id" title="inductive">EdgeLabel</span></a></span>s to sets of <span class="inlinecode"><a class="idref" href="framework.scopes.html#ScopeId"><span class="id" title="definition">ScopeId</span></a></span>s, representing
  the labeled links from this scope to other scopes. 
</li>
</ul>

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Scope</span> := ((<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">(</span></a><a class="idref" href="framework.maps.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="framework.scopes.html#R"><span class="id" title="inductive">R</span></a> <a class="idref" href="framework.scopes.html#path"><span class="id" title="inductive">path</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">(</span></a><a class="idref" href="framework.maps.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="framework.scopes.html#D"><span class="id" title="inductive">D</span></a> <a class="idref" href="framework.scopes.html#DData"><span class="id" title="variable">DData</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">)</span></a>)%<span class="id" title="var">type</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">(</span></a><a class="idref" href="framework.maps.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="framework.scopes.html#EdgeLabel"><span class="id" title="inductive">EdgeLabel</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="framework.scopes.html#ScopeId"><span class="id" title="definition">ScopeId</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">)</span></a>)%<span class="id" title="var">type</span> ;<br/>
<br/>
</div>

<div class="doc">
A scope graph is compactly represented as a finite map from
<span class="inlinecode"><a class="idref" href="framework.scopes.html#ScopeId"><span class="id" title="definition">ScopeId</span></a></span>s to <span class="inlinecode"><span class="id" title="keyword">Scope</span></span>s.  
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">graph</span> := <a class="idref" href="framework.maps.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="framework.scopes.html#ScopeId"><span class="id" title="definition">ScopeId</span></a> <span class="id" title="keyword">Scope</span> ;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="g"><span class="id" title="projection">g</span></a>: <a class="idref" href="framework.scopes.html#graph"><span class="id" title="method">graph</span></a> ;<br/>
<br/>
</div>

<div class="doc">
Projecting the paths out of a scope.

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pathsofScope</span> (<span class="id" title="var">s</span>: <a class="idref" href="framework.scopes.html#ScopeId"><span class="id" title="definition">ScopeId</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="framework.maps.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="framework.scopes.html#R"><span class="id" title="inductive">R</span></a> <a class="idref" href="framework.scopes.html#path"><span class="id" title="inductive">path</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="framework.maps.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="framework.scopes.html#ScopeIdDec"><span class="id" title="lemma">ScopeIdDec</span></a> <a class="idref" href="framework.scopes.html#g"><span class="id" title="method">g</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">dd</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <span class="id" title="var">dd</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> ;<br/>
</div>

<div class="doc">
References occur in exactly one scope in a scope graph. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<a name="uniqueRefs"><span class="id" title="projection">uniqueRefs</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">r</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">m1</span> <span class="id" title="var">m2</span> <span class="id" title="var">p1</span> <span class="id" title="var">p2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#pathsofScope"><span class="id" title="method">pathsofScope</span></a> <a class="idref" href="framework.scopes.html#s1"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#m1"><span class="id" title="variable">m1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#pathsofScope"><span class="id" title="method">pathsofScope</span></a> <a class="idref" href="framework.scopes.html#s2"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#m2"><span class="id" title="variable">m2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.maps.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="framework.scopes.html#Rdec"><span class="id" title="lemma">Rdec</span></a> <a class="idref" href="framework.scopes.html#m1"><span class="id" title="variable">m1</span></a> <a class="idref" href="framework.scopes.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#p1"><span class="id" title="variable">p1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.maps.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="framework.scopes.html#Rdec"><span class="id" title="lemma">Rdec</span></a> <a class="idref" href="framework.scopes.html#m2"><span class="id" title="variable">m2</span></a> <a class="idref" href="framework.scopes.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#p2"><span class="id" title="variable">p2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#s1"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.scopes.html#s2"><span class="id" title="variable">s2</span></a> ;<br/>
<br/>
</div>

<div class="doc">
Projecting auxiliary data out of a scope (such as type
information, associated scopes -- we provide instantiations of this
<span class="inlinecode"><a class="idref" href="framework.scopes.html#DData"><span class="id" title="variable">DData</span></a></span> later). 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ddataofScope</span> (<span class="id" title="var">s</span>: <a class="idref" href="framework.scopes.html#ScopeId"><span class="id" title="definition">ScopeId</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="framework.maps.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="framework.scopes.html#D"><span class="id" title="inductive">D</span></a> <a class="idref" href="framework.scopes.html#DData"><span class="id" title="variable">DData</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="framework.maps.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="framework.scopes.html#ScopeIdDec"><span class="id" title="lemma">ScopeIdDec</span></a> <a class="idref" href="framework.scopes.html#g"><span class="id" title="method">g</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">dd</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a>  <span class="id" title="var">dd</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> ;<br/>
</div>

<div class="doc">
Declarations occur in exactly one scope in a scope graph. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<a name="uniqueDecls"><span class="id" title="projection">uniqueDecls</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">d</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">m1</span> <span class="id" title="var">m2</span> <span class="id" title="var">dd1</span> <span class="id" title="var">dd2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#ddataofScope"><span class="id" title="method">ddataofScope</span></a> <a class="idref" href="framework.scopes.html#s1"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#m1"><span class="id" title="variable">m1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#ddataofScope"><span class="id" title="method">ddataofScope</span></a> <a class="idref" href="framework.scopes.html#s2"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#m2"><span class="id" title="variable">m2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.maps.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="framework.scopes.html#Ddec"><span class="id" title="lemma">Ddec</span></a> <a class="idref" href="framework.scopes.html#m1"><span class="id" title="variable">m1</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#dd1"><span class="id" title="variable">dd1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.maps.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="framework.scopes.html#Ddec"><span class="id" title="lemma">Ddec</span></a> <a class="idref" href="framework.scopes.html#m2"><span class="id" title="variable">m2</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#dd2"><span class="id" title="variable">dd2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#s1"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.scopes.html#s2"><span class="id" title="variable">s2</span></a> ;<br/>
<br/>
</div>

<div class="doc">
Projecting the links from a scope (K(s) om Fig. 5 in the
paper): 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">linksofScope</span> (<span class="id" title="var">s</span>: <a class="idref" href="framework.scopes.html#ScopeId"><span class="id" title="definition">ScopeId</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="framework.maps.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="framework.scopes.html#EdgeLabel"><span class="id" title="inductive">EdgeLabel</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="framework.scopes.html#ScopeId"><span class="id" title="definition">ScopeId</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="framework.maps.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="framework.scopes.html#ScopeIdDec"><span class="id" title="lemma">ScopeIdDec</span></a> <a class="idref" href="framework.scopes.html#g"><span class="id" title="method">g</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">dd</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <span class="id" title="var">dd</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> ;<br/>
<br/>
</div>

<div class="doc">
The containing scope for a reference is the (sole) one that
    has a path associated with that reference. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">scopeofRef</span> (<span class="id" title="var">r</span>:<a class="idref" href="framework.scopes.html#R"><span class="id" title="inductive">R</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="framework.scopes.html#ScopeId"><span class="id" title="definition">ScopeId</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fix</span> <span class="id" title="var">f</span> <span class="id" title="var">ss</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="framework.scopes.html#ss"><span class="id" title="variable">ss</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><span class="id" title="var">ss'</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="framework.scopes.html#pathsofScope"><span class="id" title="method">pathsofScope</span></a> <span class="id" title="var">s</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">mp</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="framework.maps.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="framework.scopes.html#Rdec"><span class="id" title="lemma">Rdec</span></a> <span class="id" title="var">mp</span> <a class="idref" href="framework.scopes.html#r"><span class="id" title="variable">r</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="framework.scopes.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">ss'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="framework.scopes.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">ss'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) (<a class="idref" href="framework.maps.html#keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="framework.scopes.html#g"><span class="id" title="method">g</span></a>) ;<br/>
<br/>
</div>

<div class="doc">
Returns the path of a reference, if the reference exists in the
scope graph: 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pathofRef</span> (<span class="id" title="var">r</span>: <a class="idref" href="framework.scopes.html#R"><span class="id" title="inductive">R</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="framework.scopes.html#path"><span class="id" title="inductive">path</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="framework.scopes.html#scopeofRef"><span class="id" title="method">scopeofRef</span></a> <a class="idref" href="framework.scopes.html#r"><span class="id" title="variable">r</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">s</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="framework.scopes.html#pathsofScope"><span class="id" title="method">pathsofScope</span></a> <span class="id" title="var">s</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">m</span> ⇒ <a class="idref" href="framework.maps.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="framework.scopes.html#Rdec"><span class="id" title="lemma">Rdec</span></a> <span class="id" title="var">m</span> <a class="idref" href="framework.scopes.html#r"><span class="id" title="variable">r</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> ;<br/>
<br/>
</div>

<div class="doc">
The containing scope for a declaration is the (sole) one that has <span class="inlinecode"><a class="idref" href="framework.scopes.html#DData"><span class="id" title="variable">DData</span></a></span>
    associated associated with that declaration: 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">scopeofDecl</span> (<span class="id" title="var">d</span>:<a class="idref" href="framework.scopes.html#D"><span class="id" title="inductive">D</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="framework.scopes.html#ScopeId"><span class="id" title="definition">ScopeId</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fix</span> <span class="id" title="var">f</span> <span class="id" title="var">ss</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="framework.scopes.html#ss"><span class="id" title="variable">ss</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><span class="id" title="var">ss'</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="framework.scopes.html#ddataofScope"><span class="id" title="method">ddataofScope</span></a> <span class="id" title="var">s</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">mp</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="framework.maps.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="framework.scopes.html#Ddec"><span class="id" title="lemma">Ddec</span></a> <span class="id" title="var">mp</span> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="framework.scopes.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">ss'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="framework.scopes.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">ss'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) (<a class="idref" href="framework.maps.html#keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="framework.scopes.html#g"><span class="id" title="method">g</span></a>) ;<br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="framework.scopes.html#slookup"><span class="id" title="method">slookup</span></a></span> <span class="inlinecode"><a class="idref" href="framework.scopes.html#g"><span class="id" title="projection">g</span></a></span> <span class="inlinecode"><a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a></span> <span class="inlinecode"><a class="idref" href="framework.scopes.html#p"><span class="id" title="variable">p</span></a></span> <span class="inlinecode"><a class="idref" href="framework.scopes.html#s'"><span class="id" title="variable">s'</span></a></span> <span class="inlinecode"><a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a></span> means that in graph <span class="inlinecode"><a class="idref" href="framework.scopes.html#g"><span class="id" title="projection">g</span></a></span>, path <span class="inlinecode"><a class="idref" href="framework.scopes.html#p"><span class="id" title="variable">p</span></a></span> leads from
    scope <span class="inlinecode"><a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a></span> to scope <span class="inlinecode"><a class="idref" href="framework.scopes.html#s'"><span class="id" title="variable">s'</span></a></span> and declaration <span class="inlinecode"><a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a></span>. (This corresponds to the
    definition of consistent path in Fig. 6 of the paper.) 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">slookup</span> : <a class="idref" href="framework.scopes.html#ScopeId"><span class="id" title="definition">ScopeId</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="framework.scopes.html#path"><span class="id" title="inductive">path</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="framework.scopes.html#ScopeId"><span class="id" title="definition">ScopeId</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="framework.scopes.html#D"><span class="id" title="inductive">D</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fix</span> <span class="id" title="var">f</span> (<span class="id" title="var">s</span>: <a class="idref" href="framework.scopes.html#ScopeId"><span class="id" title="definition">ScopeId</span></a>) (<span class="id" title="var">p</span>: <a class="idref" href="framework.scopes.html#path"><span class="id" title="inductive">path</span></a>) (<span class="id" title="var">s'</span>: <a class="idref" href="framework.scopes.html#ScopeId"><span class="id" title="definition">ScopeId</span></a>) (<span class="id" title="var">d</span>: <a class="idref" href="framework.scopes.html#D"><span class="id" title="inductive">D</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="framework.scopes.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="framework.scopes.html#Dp"><span class="id" title="constructor">Dp</span></a> <span class="id" title="var">d'</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">dd</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="framework.scopes.html#ddataofScope"><span class="id" title="method">ddataofScope</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#dd"><span class="id" title="variable">dd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">d'</span> (<a class="idref" href="framework.maps.html#keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="framework.scopes.html#dd"><span class="id" title="variable">dd</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a>  <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.scopes.html#s'"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">d'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="framework.scopes.html#Ep"><span class="id" title="constructor">Ep</span></a> <span class="id" title="var">l</span> <span class="id" title="var">s''</span> <span class="id" title="var">p'</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">ks</span> <span class="id" title="var">ss</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="framework.scopes.html#linksofScope"><span class="id" title="method">linksofScope</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#ks"><span class="id" title="variable">ks</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.maps.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="framework.scopes.html#ELdec"><span class="id" title="lemma">ELdec</span></a> <a class="idref" href="framework.scopes.html#ks"><span class="id" title="variable">ks</span></a> <span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#ss"><span class="id" title="variable">ss</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">s''</span> <a class="idref" href="framework.scopes.html#ss"><span class="id" title="variable">ss</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">s''</span> <span class="id" title="var">p'</span> <a class="idref" href="framework.scopes.html#s'"><span class="id" title="variable">s'</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> ;<br/>
<br/>
</div>

<div class="doc">
All paths recorded in a scope graph correspond to actual,
    well-connected paths. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<a name="path_connectivity"><span class="id" title="projection">path_connectivity</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">s</span> <span class="id" title="var">m</span>, <a class="idref" href="framework.scopes.html#pathsofScope"><span class="id" title="method">pathsofScope</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">∀</span> <span class="id" title="var">r</span> <span class="id" title="var">p</span>, <a class="idref" href="framework.maps.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="framework.scopes.html#Rdec"><span class="id" title="lemma">Rdec</span></a> <a class="idref" href="framework.scopes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="framework.scopes.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">sd</span> <span class="id" title="var">d</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="framework.scopes.html#slookup"><span class="id" title="method">slookup</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="framework.scopes.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="framework.scopes.html#sd"><span class="id" title="variable">sd</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> ;<br/>
&nbsp;&nbsp;}.<br/>

<br/>
</div>

<div class="doc">
<a name="lab3"></a><h2 class="section">Derived Properties</h2>

<div class="paragraph"> </div>

 We prove prove some sanity lemmas establishing how the different
ways of retrieving information from a scope graph are equivalent. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a name="SanityChecks"><span class="id" title="section">SanityChecks</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a class="idref" href="framework.scopes.html#Graph"><span class="id" title="class">Graph</span></a>}.<br/>

<br/>
</div>

<div class="doc">
For <span class="inlinecode"><a class="idref" href="framework.scopes.html#scopeofRef"><span class="id" title="method">scopeofRef</span></a></span>: 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="scopeofRef_sanity1"><span class="id" title="lemma">scopeofRef_sanity1</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">s</span> <span class="id" title="var">m</span> <span class="id" title="var">r</span> <span class="id" title="var">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#pathsofScope"><span class="id" title="method">pathsofScope</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.maps.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="framework.scopes.html#Rdec"><span class="id" title="lemma">Rdec</span></a> <a class="idref" href="framework.scopes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="framework.scopes.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#scopeofRef"><span class="id" title="method">scopeofRef</span></a> <a class="idref" href="framework.scopes.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="framework.scopes.html#scopeofRef"><span class="id" title="method">scopeofRef</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="framework.scopes.html#pathsofScope"><span class="id" title="method">pathsofScope</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="framework.maps.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="framework.scopes.html#ScopeIdDec"><span class="id" title="lemma">ScopeIdDec</span></a> <a class="idref" href="framework.scopes.html#g"><span class="id" title="method">g</span></a> <span class="id" title="var">s</span>) <span class="id" title="var">eqn</span>:?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="var">Heqo</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">P0</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="framework.maps.html#keys_in"><span class="id" title="lemma">keys_in</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">P0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="framework.maps.html#keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="framework.scopes.html#g"><span class="id" title="method">g</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">ks</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">P</span>: <span class="id" title="keyword">∀</span> <span class="id" title="var">k</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="framework.scopes.html#k"><span class="id" title="variable">k</span></a> <span class="id" title="var">ks</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="framework.scopes.html#k"><span class="id" title="variable">k</span></a> (<a class="idref" href="framework.maps.html#keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="framework.scopes.html#g"><span class="id" title="method">g</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqks</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Heqks</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ks</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">inv</span> <span class="id" title="var">P0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">inv</span> <span class="id" title="var">P0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="framework.scopes.html#pathsofScope"><span class="id" title="method">pathsofScope</span></a> <span class="id" title="var">s</span>) <span class="id" title="var">eqn</span>:?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="framework.maps.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="framework.scopes.html#Rdec"><span class="id" title="lemma">Rdec</span></a> <span class="id" title="var">m0</span> <span class="id" title="var">r</span>) <span class="id" title="var">eqn</span>:?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="framework.scopes.html#pathsofScope"><span class="id" title="method">pathsofScope</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">Heqo0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqo</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Heqo0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqo0</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqo1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H1</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="framework.scopes.html#pathsofScope"><span class="id" title="method">pathsofScope</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">Heqo0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqo</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Heqo0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">Heqo0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="framework.scopes.html#pathsofScope"><span class="id" title="method">pathsofScope</span></a> <span class="id" title="var">a</span>) <span class="id" title="var">eqn</span>:?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="framework.maps.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="framework.scopes.html#Rdec"><span class="id" title="lemma">Rdec</span></a> <span class="id" title="var">m0</span> <span class="id" title="var">r</span>) <span class="id" title="var">eqn</span>:?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="framework.scopes.html#uniqueRefs"><span class="id" title="method">uniqueRefs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="framework.scopes.html#pathsofScope"><span class="id" title="method">pathsofScope</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqo</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHks</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">P</span>; <span class="id" title="tactic">right</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHks</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">P</span>; <span class="id" title="tactic">right</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="scopeofRef_sanity2"><span class="id" title="lemma">scopeofRef_sanity2</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">s</span> <span class="id" title="var">r</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#scopeofRef"><span class="id" title="method">scopeofRef</span></a> <a class="idref" href="framework.scopes.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">m</span> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="framework.scopes.html#pathsofScope"><span class="id" title="method">pathsofScope</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="framework.maps.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="framework.scopes.html#Rdec"><span class="id" title="lemma">Rdec</span></a> <a class="idref" href="framework.scopes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="framework.scopes.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#p"><span class="id" title="variable">p</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="framework.scopes.html#scopeofRef"><span class="id" title="method">scopeofRef</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="framework.maps.html#keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="framework.scopes.html#g"><span class="id" title="method">g</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">ks</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">P</span>: <span class="id" title="keyword">∀</span> <span class="id" title="var">k</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="framework.scopes.html#k"><span class="id" title="variable">k</span></a> <span class="id" title="var">ks</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="framework.scopes.html#k"><span class="id" title="variable">k</span></a> (<a class="idref" href="framework.maps.html#keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="framework.scopes.html#g"><span class="id" title="method">g</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqks</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Heqks</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ks</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<a class="idref" href="framework.scopes.html#pathsofScope"><span class="id" title="method">pathsofScope</span></a> <span class="id" title="var">a</span>) <span class="id" title="var">eqn</span>:?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="framework.maps.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="framework.scopes.html#Rdec"><span class="id" title="lemma">Rdec</span></a> <span class="id" title="var">m</span> <span class="id" title="var">r</span>) <span class="id" title="var">eqn</span>:?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHks</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">P</span>; <span class="id" title="tactic">right</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHks</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">P</span>; <span class="id" title="tactic">right</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
For <span class="inlinecode"><a class="idref" href="framework.scopes.html#scopeofDecl"><span class="id" title="method">scopeofDecl</span></a></span>: 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="scopeofDecl_sanity1"><span class="id" title="lemma">scopeofDecl_sanity1</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">s</span> <span class="id" title="var">m</span> <span class="id" title="var">d</span> <span class="id" title="var">dd</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#ddataofScope"><span class="id" title="method">ddataofScope</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.maps.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="framework.scopes.html#Ddec"><span class="id" title="lemma">Ddec</span></a> <a class="idref" href="framework.scopes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#dd"><span class="id" title="variable">dd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#scopeofDecl"><span class="id" title="method">scopeofDecl</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="framework.scopes.html#scopeofDecl"><span class="id" title="method">scopeofDecl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="framework.scopes.html#ddataofScope"><span class="id" title="method">ddataofScope</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="framework.maps.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="framework.scopes.html#ScopeIdDec"><span class="id" title="lemma">ScopeIdDec</span></a> <a class="idref" href="framework.scopes.html#g"><span class="id" title="method">g</span></a> <span class="id" title="var">s</span>) <span class="id" title="var">eqn</span>:?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="var">Heqo</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">P0</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="framework.maps.html#keys_in"><span class="id" title="lemma">keys_in</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">P0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="framework.maps.html#keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="framework.scopes.html#g"><span class="id" title="method">g</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">ks</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">P</span>: <span class="id" title="keyword">∀</span> <span class="id" title="var">k</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="framework.scopes.html#k"><span class="id" title="variable">k</span></a> <span class="id" title="var">ks</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="framework.scopes.html#k"><span class="id" title="variable">k</span></a> (<a class="idref" href="framework.maps.html#keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="framework.scopes.html#g"><span class="id" title="method">g</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqks</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Heqks</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ks</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">inv</span> <span class="id" title="var">P0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">inv</span> <span class="id" title="var">P0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="framework.scopes.html#ddataofScope"><span class="id" title="method">ddataofScope</span></a> <span class="id" title="var">s</span>) <span class="id" title="var">eqn</span>:?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="framework.maps.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="framework.scopes.html#Ddec"><span class="id" title="lemma">Ddec</span></a> <span class="id" title="var">m0</span> <span class="id" title="var">d</span>) <span class="id" title="var">eqn</span>:?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="framework.scopes.html#ddataofScope"><span class="id" title="method">ddataofScope</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">Heqo0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqo</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Heqo0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqo0</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqo1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H1</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="framework.scopes.html#ddataofScope"><span class="id" title="method">ddataofScope</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">Heqo0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqo</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Heqo0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">Heqo0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="framework.scopes.html#ddataofScope"><span class="id" title="method">ddataofScope</span></a> <span class="id" title="var">a</span>) <span class="id" title="var">eqn</span>:?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="framework.maps.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="framework.scopes.html#Ddec"><span class="id" title="lemma">Ddec</span></a> <span class="id" title="var">m0</span> <span class="id" title="var">d</span>) <span class="id" title="var">eqn</span>:?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="framework.scopes.html#uniqueDecls"><span class="id" title="method">uniqueDecls</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="framework.scopes.html#ddataofScope"><span class="id" title="method">ddataofScope</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqo</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHks</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">P</span>; <span class="id" title="tactic">right</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHks</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">P</span>; <span class="id" title="tactic">right</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="scopeofDecl_sanity2"><span class="id" title="lemma">scopeofDecl_sanity2</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">s</span> <span class="id" title="var">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#scopeofDecl"><span class="id" title="method">scopeofDecl</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">m</span> <span class="id" title="var">dd</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="framework.scopes.html#ddataofScope"><span class="id" title="method">ddataofScope</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="framework.maps.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="framework.scopes.html#Ddec"><span class="id" title="lemma">Ddec</span></a> <a class="idref" href="framework.scopes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#dd"><span class="id" title="variable">dd</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="framework.scopes.html#scopeofDecl"><span class="id" title="method">scopeofDecl</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="framework.maps.html#keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="framework.scopes.html#g"><span class="id" title="method">g</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">ks</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">P</span>: <span class="id" title="keyword">∀</span> <span class="id" title="var">k</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="framework.scopes.html#k"><span class="id" title="variable">k</span></a> <span class="id" title="var">ks</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="framework.scopes.html#k"><span class="id" title="variable">k</span></a> (<a class="idref" href="framework.maps.html#keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="framework.scopes.html#g"><span class="id" title="method">g</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqks</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Heqks</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ks</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<a class="idref" href="framework.scopes.html#ddataofScope"><span class="id" title="method">ddataofScope</span></a> <span class="id" title="var">a</span>) <span class="id" title="var">eqn</span>:?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="framework.maps.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="framework.scopes.html#Ddec"><span class="id" title="lemma">Ddec</span></a> <span class="id" title="var">m</span> <span class="id" title="var">d</span>) <span class="id" title="var">eqn</span>:?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHks</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">P</span>; <span class="id" title="tactic">right</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHks</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">P</span>; <span class="id" title="tactic">right</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Straightforward corollary for use in proofs: 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Corollary</span> <a name="ddataofScope_scopeofDecl"><span class="id" title="lemma">ddataofScope_scopeofDecl</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">dd</span> <span class="id" title="var">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#ddataofScope"><span class="id" title="method">ddataofScope</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#dd"><span class="id" title="variable">dd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> (<a class="idref" href="framework.maps.html#keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="framework.scopes.html#dd"><span class="id" title="variable">dd</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#scopeofDecl"><span class="id" title="method">scopeofDecl</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="framework.maps.html#in_keys"><span class="id" title="lemma">in_keys</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="framework.scopes.html#scopeofDecl_sanity1"><span class="id" title="lemma">scopeofDecl_sanity1</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="framework.scopes.html#SanityChecks"><span class="id" title="section">SanityChecks</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab4"></a><h2 class="section">Predicate forms.</h2>

<div class="paragraph"> </div>

 We provide predicates for reasoning about scope graphs. Most are
wrappers for the functions in <span class="inlinecode"><a class="idref" href="framework.scopes.html#Graph"><span class="id" title="record">Graph</span></a></span>. We prove determinism for each
predicate.

<div class="paragraph"> </div>

The reason for using these predicate forms, instead of their
functional counterparts defined in <span class="inlinecode"><a class="idref" href="framework.scopes.html#Graph"><span class="id" title="record">Graph</span></a></span>, is mainly historical. We
expect to deprecate many of these in future work, and use the
functions in <span class="inlinecode"><a class="idref" href="framework.scopes.html#Graph"><span class="id" title="record">Graph</span></a></span> instead. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a name="PredicateForms"><span class="id" title="section">PredicateForms</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a class="idref" href="framework.scopes.html#Graph"><span class="id" title="class">Graph</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="ddataofScopeP"><span class="id" title="definition">ddataofScopeP</span></a> (<span class="id" title="var">s</span>: <a class="idref" href="framework.scopes.html#ScopeId"><span class="id" title="definition">ScopeId</span></a>) (<span class="id" title="var">ds</span>: <a class="idref" href="framework.maps.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="framework.scopes.html#D"><span class="id" title="inductive">D</span></a> <a class="idref" href="framework.scopes.html#PredicateForms.DData"><span class="id" title="variable">DData</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#ddataofScope"><span class="id" title="method">ddataofScope</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#ds"><span class="id" title="variable">ds</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="ddataofScopeDet"><span class="id" title="lemma">ddataofScopeDet</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">s</span> <span class="id" title="var">ds1</span> <span class="id" title="var">ds2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#ddataofScopeP"><span class="id" title="definition">ddataofScopeP</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="framework.scopes.html#ds1"><span class="id" title="variable">ds1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#ddataofScopeP"><span class="id" title="definition">ddataofScopeP</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="framework.scopes.html#ds2"><span class="id" title="variable">ds2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#ds1"><span class="id" title="variable">ds1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.scopes.html#ds2"><span class="id" title="variable">ds2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Gets the declarations of a scope (D(s) in Fig. 5 in the
  paper). 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="declsofScopeP"><span class="id" title="definition">declsofScopeP</span></a> (<span class="id" title="var">s</span>: <a class="idref" href="framework.scopes.html#ScopeId"><span class="id" title="definition">ScopeId</span></a>) (<span class="id" title="var">ds</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="framework.scopes.html#D"><span class="id" title="inductive">D</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">dd</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="framework.scopes.html#ddataofScope"><span class="id" title="method">ddataofScope</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#dd"><span class="id" title="variable">dd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="framework.scopes.html#ds"><span class="id" title="variable">ds</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.maps.html#keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="framework.scopes.html#dd"><span class="id" title="variable">dd</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="declsofScopeDet"><span class="id" title="lemma">declsofScopeDet</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">s</span> <span class="id" title="var">ds1</span> <span class="id" title="var">ds2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#declsofScopeP"><span class="id" title="definition">declsofScopeP</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="framework.scopes.html#ds1"><span class="id" title="variable">ds1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#declsofScopeP"><span class="id" title="definition">declsofScopeP</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="framework.scopes.html#ds2"><span class="id" title="variable">ds2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#ds1"><span class="id" title="variable">ds1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.scopes.html#ds2"><span class="id" title="variable">ds2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [? [<span class="id" title="var">DD</span> <span class="id" title="var">DS</span>]]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> [? [<span class="id" title="var">DD'</span> <span class="id" title="var">DS'</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">DD'</span> <span class="id" title="keyword">in</span> <span class="id" title="var">DD</span>; <span class="id" title="var">inv</span> <span class="id" title="var">DD</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="declsofScope_scopeofDecl"><span class="id" title="lemma">declsofScope_scopeofDecl</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">s</span> <span class="id" title="var">ds</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#declsofScopeP"><span class="id" title="definition">declsofScopeP</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="framework.scopes.html#ds"><span class="id" title="variable">ds</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="framework.scopes.html#ds"><span class="id" title="variable">ds</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#scopeofDecl"><span class="id" title="method">scopeofDecl</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [? [? ?]]. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="framework.scopes.html#ddataofScope_scopeofDecl"><span class="id" title="lemma">ddataofScope_scopeofDecl</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Gets the declarations of a scope (R(s) in Fig. 5 in the
  paper). 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="refsofScopeP"><span class="id" title="definition">refsofScopeP</span></a> (<span class="id" title="var">s</span>: <a class="idref" href="framework.scopes.html#ScopeId"><span class="id" title="definition">ScopeId</span></a>) (<span class="id" title="var">rs</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="framework.scopes.html#R"><span class="id" title="inductive">R</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">m</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="framework.scopes.html#pathsofScope"><span class="id" title="method">pathsofScope</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="framework.scopes.html#rs"><span class="id" title="variable">rs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.maps.html#keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="framework.scopes.html#m"><span class="id" title="variable">m</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="refsofScopeDet"><span class="id" title="lemma">refsofScopeDet</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">s</span> <span class="id" title="var">rs1</span> <span class="id" title="var">rs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#refsofScopeP"><span class="id" title="definition">refsofScopeP</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="framework.scopes.html#rs1"><span class="id" title="variable">rs1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#refsofScopeP"><span class="id" title="definition">refsofScopeP</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="framework.scopes.html#rs2"><span class="id" title="variable">rs2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#rs1"><span class="id" title="variable">rs1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.scopes.html#rs2"><span class="id" title="variable">rs2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [? [? ?]]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> [? [? ?]]. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="linksofScopeP"><span class="id" title="definition">linksofScopeP</span></a> (<span class="id" title="var">s</span>: <a class="idref" href="framework.scopes.html#ScopeId"><span class="id" title="definition">ScopeId</span></a>) (<span class="id" title="var">ks</span>: <a class="idref" href="framework.maps.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="framework.scopes.html#EdgeLabel"><span class="id" title="inductive">EdgeLabel</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="framework.scopes.html#ScopeId"><span class="id" title="definition">ScopeId</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#linksofScope"><span class="id" title="method">linksofScope</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#ks"><span class="id" title="variable">ks</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="linksofScopeDet"><span class="id" title="lemma">linksofScopeDet</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">s</span> <span class="id" title="var">ims</span> <span class="id" title="var">ims'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#linksofScopeP"><span class="id" title="definition">linksofScopeP</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="framework.scopes.html#ims"><span class="id" title="variable">ims</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#linksofScopeP"><span class="id" title="definition">linksofScopeP</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="framework.scopes.html#ims'"><span class="id" title="variable">ims'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#ims"><span class="id" title="variable">ims</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.scopes.html#ims'"><span class="id" title="variable">ims'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="scopeofDeclP"><span class="id" title="definition">scopeofDeclP</span></a> (<span class="id" title="var">d</span>: <a class="idref" href="framework.scopes.html#D"><span class="id" title="inductive">D</span></a>) (<span class="id" title="var">s</span>: <a class="idref" href="framework.scopes.html#ScopeId"><span class="id" title="definition">ScopeId</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#scopeofDecl"><span class="id" title="method">scopeofDecl</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="scopeofDeclDet"><span class="id" title="lemma">scopeofDeclDet</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">d</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#scopeofDeclP"><span class="id" title="definition">scopeofDeclP</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#scopeofDeclP"><span class="id" title="definition">scopeofDeclP</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="framework.scopes.html#s'"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.scopes.html#s'"><span class="id" title="variable">s'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="scopeofRefP"><span class="id" title="definition">scopeofRefP</span></a> (<span class="id" title="var">r</span>: <a class="idref" href="framework.scopes.html#R"><span class="id" title="inductive">R</span></a>) (<span class="id" title="var">s</span>: <a class="idref" href="framework.scopes.html#ScopeId"><span class="id" title="definition">ScopeId</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#scopeofRef"><span class="id" title="method">scopeofRef</span></a> <a class="idref" href="framework.scopes.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="scopeofRefDet"><span class="id" title="lemma">scopeofRefDet</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">d</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#scopeofRefP"><span class="id" title="definition">scopeofRefP</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#scopeofRefP"><span class="id" title="definition">scopeofRefP</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="framework.scopes.html#s'"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.scopes.html#s'"><span class="id" title="variable">s'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="framework.scopes.html#ScopeIdDec"><span class="id" title="lemma">ScopeIdDec</span></a> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>); <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="pathofRefP"><span class="id" title="definition">pathofRefP</span></a> (<span class="id" title="var">r</span>: <a class="idref" href="framework.scopes.html#R"><span class="id" title="inductive">R</span></a>) (<span class="id" title="var">p</span>: <a class="idref" href="framework.scopes.html#path"><span class="id" title="inductive">path</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#pathofRef"><span class="id" title="method">pathofRef</span></a> <a class="idref" href="framework.scopes.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#p"><span class="id" title="variable">p</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="pathofRefDet"><span class="id" title="lemma">pathofRefDet</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">r</span> <span class="id" title="var">p1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#pathofRefP"><span class="id" title="definition">pathofRefP</span></a> <a class="idref" href="framework.scopes.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="framework.scopes.html#p1"><span class="id" title="variable">p1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">p2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#pathofRefP"><span class="id" title="definition">pathofRefP</span></a> <a class="idref" href="framework.scopes.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="framework.scopes.html#p2"><span class="id" title="variable">p2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#p1"><span class="id" title="variable">p1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.scopes.html#p2"><span class="id" title="variable">p2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="framework.scopes.html#pathofRefP"><span class="id" title="definition">pathofRefP</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>, <span class="id" title="var">H1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
For retrieving data associated with declarations (such as
  associated scopes and types). 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="assocData"><span class="id" title="inductive">assocData</span></a> (<span class="id" title="var">d</span>: <a class="idref" href="framework.scopes.html#D"><span class="id" title="inductive">D</span></a>) : <a class="idref" href="framework.scopes.html#PredicateForms.DData"><span class="id" title="variable">DData</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="assocData_"><span class="id" title="constructor">assocData_</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">s</span> <span class="id" title="var">ds</span> <span class="id" title="var">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#scopeofDecl"><span class="id" title="method">scopeofDecl</span></a> <span class="id" title="var">d</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#ddataofScope"><span class="id" title="method">ddataofScope</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#ds"><span class="id" title="variable">ds</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.maps.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="framework.scopes.html#Ddec"><span class="id" title="lemma">Ddec</span></a> <a class="idref" href="framework.scopes.html#ds"><span class="id" title="variable">ds</span></a> <span class="id" title="var">d</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#assocData"><span class="id" title="inductive">assocData</span></a> <span class="id" title="var">d</span> <a class="idref" href="framework.scopes.html#p"><span class="id" title="variable">p</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="assocDataDet"><span class="id" title="lemma">assocDataDet</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">d</span> <span class="id" title="var">dd</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#assocData"><span class="id" title="inductive">assocData</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="framework.scopes.html#dd"><span class="id" title="variable">dd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">dd'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#assocData"><span class="id" title="inductive">assocData</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="framework.scopes.html#dd'"><span class="id" title="variable">dd'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#dd"><span class="id" title="variable">dd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.scopes.html#dd'"><span class="id" title="variable">dd'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="framework.scopes.html#scopeofDeclDet"><span class="id" title="lemma">scopeofDeclDet</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="framework.scopes.html#ddataofScopeDet"><span class="id" title="lemma">ddataofScopeDet</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H6</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H4</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="declofRef"><span class="id" title="inductive">declofRef</span></a> (<span class="id" title="var">r</span>:<a class="idref" href="framework.scopes.html#R"><span class="id" title="inductive">R</span></a>) (<span class="id" title="var">d</span>:<a class="idref" href="framework.scopes.html#D"><span class="id" title="inductive">D</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="declofRef_"><span class="id" title="constructor">declofRef_</span></a> : <span class="id" title="keyword">∀</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">p</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">PR</span>: <a class="idref" href="framework.scopes.html#pathofRefP"><span class="id" title="definition">pathofRefP</span></a> <span class="id" title="var">r</span> <a class="idref" href="framework.scopes.html#p"><span class="id" title="variable">p</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">d</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.scopes.html#declofPath"><span class="id" title="definition">declofPath</span></a> <a class="idref" href="framework.scopes.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#declofRef"><span class="id" title="inductive">declofRef</span></a> <span class="id" title="var">r</span> <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="declofRefDet"><span class="id" title="lemma">declofRefDet</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">r</span> <span class="id" title="var">d1</span> <span class="id" title="var">d2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#declofRef"><span class="id" title="inductive">declofRef</span></a> <a class="idref" href="framework.scopes.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="framework.scopes.html#d1"><span class="id" title="variable">d1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="framework.scopes.html#declofRef"><span class="id" title="inductive">declofRef</span></a> <a class="idref" href="framework.scopes.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="framework.scopes.html#d2"><span class="id" title="variable">d2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="framework.scopes.html#d1"><span class="id" title="variable">d1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.scopes.html#d2"><span class="id" title="variable">d2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="framework.scopes.html#pathofRefDet"><span class="id" title="lemma">pathofRefDet</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">PR</span> <span class="id" title="var">_</span> <span class="id" title="var">PR0</span>). <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="declsofRefs"><span class="id" title="definition">declsofRefs</span></a> (<span class="id" title="var">rs</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="framework.scopes.html#R"><span class="id" title="inductive">R</span></a>) (<span class="id" title="var">ds</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="framework.scopes.html#D"><span class="id" title="inductive">D</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Lists.List.html#Forall2"><span class="id" title="inductive">Forall2</span></a> <a class="idref" href="framework.scopes.html#declofRef"><span class="id" title="inductive">declofRef</span></a> <a class="idref" href="framework.scopes.html#rs"><span class="id" title="variable">rs</span></a> <a class="idref" href="framework.scopes.html#ds"><span class="id" title="variable">ds</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="assocDataofRef"><span class="id" title="definition">assocDataofRef</span></a> <span class="id" title="var">r</span> <span class="id" title="var">s</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">d</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="framework.scopes.html#declofRef"><span class="id" title="inductive">declofRef</span></a> <a class="idref" href="framework.scopes.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="framework.scopes.html#assocData"><span class="id" title="inductive">assocData</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="assocDataofRefDet"><span class="id" title="lemma">assocDataofRefDet</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">r</span> <span class="id" title="var">dd</span> <span class="id" title="var">dd'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#assocDataofRef"><span class="id" title="definition">assocDataofRef</span></a> <a class="idref" href="framework.scopes.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="framework.scopes.html#dd"><span class="id" title="variable">dd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#assocDataofRef"><span class="id" title="definition">assocDataofRef</span></a> <a class="idref" href="framework.scopes.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="framework.scopes.html#dd'"><span class="id" title="variable">dd'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#dd"><span class="id" title="variable">dd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.scopes.html#dd'"><span class="id" title="variable">dd'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [? [<span class="id" title="var">DR1</span> <span class="id" title="var">ASC1</span>]]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> [? [<span class="id" title="var">DR2</span> <span class="id" title="var">ASC2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="framework.scopes.html#declofRefDet"><span class="id" title="lemma">declofRefDet</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">DR1</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="framework.scopes.html#assocDataDet"><span class="id" title="lemma">assocDataDet</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">ASC1</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="llinksofScopeP"><span class="id" title="definition">llinksofScopeP</span></a> (<span class="id" title="var">s</span>: <a class="idref" href="framework.scopes.html#ScopeId"><span class="id" title="definition">ScopeId</span></a>) (<span class="id" title="var">l</span>: <a class="idref" href="framework.scopes.html#EdgeLabel"><span class="id" title="inductive">EdgeLabel</span></a>) (<span class="id" title="var">ss</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="framework.scopes.html#ScopeId"><span class="id" title="definition">ScopeId</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">ks</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="framework.scopes.html#linksofScopeP"><span class="id" title="definition">linksofScopeP</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="framework.scopes.html#ks"><span class="id" title="variable">ks</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="framework.maps.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="framework.scopes.html#ELdec"><span class="id" title="lemma">ELdec</span></a> <a class="idref" href="framework.scopes.html#ks"><span class="id" title="variable">ks</span></a> <a class="idref" href="framework.scopes.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#ss"><span class="id" title="variable">ss</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="llinksofScopeDet"><span class="id" title="lemma">llinksofScopeDet</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">s</span> <span class="id" title="var">l</span> <span class="id" title="var">ims</span> <span class="id" title="var">ims'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#llinksofScopeP"><span class="id" title="definition">llinksofScopeP</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="framework.scopes.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="framework.scopes.html#ims"><span class="id" title="variable">ims</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#llinksofScopeP"><span class="id" title="definition">llinksofScopeP</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="framework.scopes.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="framework.scopes.html#ims'"><span class="id" title="variable">ims'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#ims"><span class="id" title="variable">ims</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.scopes.html#ims'"><span class="id" title="variable">ims'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="framework.scopes.html#linksofScopeDet"><span class="id" title="lemma">linksofScopeDet</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="framework.scopes.html#PredicateForms"><span class="id" title="section">PredicateForms</span></a>.<br/>

<br/>
<span class="id" title="keyword">Hint Unfold</span> <a class="idref" href="framework.maps.html#DomEq"><span class="id" title="definition">DomEq</span></a> : <span class="id" title="var">sgraph</span>.<br/>
<span class="id" title="keyword">Hint Unfold</span> <a class="idref" href="framework.scopes.html#declsofScopeP"><span class="id" title="definition">declsofScopeP</span></a> : <span class="id" title="var">sgraph</span>.<br/>
<span class="id" title="keyword">Hint Unfold</span> <a class="idref" href="framework.scopes.html#pathofRefP"><span class="id" title="definition">pathofRefP</span></a> : <span class="id" title="var">sgraph</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab5"></a><h2 class="section">Lookup Predicate Properties</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a name="LookupPredicates"><span class="id" title="section">LookupPredicates</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a class="idref" href="framework.scopes.html#Graph"><span class="id" title="class">Graph</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="slookupDet"><span class="id" title="lemma">slookupDet</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">p</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">d'</span> <span class="id" title="var">s''</span> <span class="id" title="var">d''</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#slookup"><span class="id" title="method">slookup</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="framework.scopes.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="framework.scopes.html#s'"><span class="id" title="variable">s'</span></a> <a class="idref" href="framework.scopes.html#d'"><span class="id" title="variable">d'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#slookup"><span class="id" title="method">slookup</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="framework.scopes.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="framework.scopes.html#s''"><span class="id" title="variable">s''</span></a> <a class="idref" href="framework.scopes.html#d''"><span class="id" title="variable">d''</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#s'"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.scopes.html#s''"><span class="id" title="variable">s''</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="framework.scopes.html#d'"><span class="id" title="variable">d'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.scopes.html#d''"><span class="id" title="variable">d''</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [? [? [? [? ?]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> [? [? [? [? ?]]]]. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [? [? [? [? [? ?]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> [? [? [? [? [? ?]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="slookup_declofPath"><span class="id" title="lemma">slookup_declofPath</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">p</span> <span class="id" title="var">s</span> <span class="id" title="var">d</span> <span class="id" title="var">sd</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#slookup"><span class="id" title="method">slookup</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="framework.scopes.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="framework.scopes.html#sd"><span class="id" title="variable">sd</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.scopes.html#declofPath"><span class="id" title="definition">declofPath</span></a> <a class="idref" href="framework.scopes.html#p"><span class="id" title="variable">p</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [? [? [? [? ?]]]]; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [? [? [? [? [? ?]]]]]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="path_connectivity'"><span class="id" title="lemma">path_connectivity'</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">r</span> <span class="id" title="var">p</span> <span class="id" title="var">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#pathofRef"><span class="id" title="method">pathofRef</span></a> <a class="idref" href="framework.scopes.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#scopeofRef"><span class="id" title="method">scopeofRef</span></a> <a class="idref" href="framework.scopes.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">sd</span> <span class="id" title="var">d</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="framework.scopes.html#slookup"><span class="id" title="method">slookup</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="framework.scopes.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="framework.scopes.html#sd"><span class="id" title="variable">sd</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> .<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="framework.scopes.html#pathofRef"><span class="id" title="method">pathofRef</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="framework.scopes.html#pathsofScope"><span class="id" title="method">pathsofScope</span></a> <span class="id" title="var">s</span>) <span class="id" title="var">eqn</span>:?. 2:<span class="id" title="var">inv</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="framework.scopes.html#path_connectivity"><span class="id" title="method">path_connectivity</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="slookup_ddata"><span class="id" title="lemma">slookup_ddata</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">p</span> <span class="id" title="var">s</span> <span class="id" title="var">sd</span> <span class="id" title="var">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#slookup"><span class="id" title="method">slookup</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="framework.scopes.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="framework.scopes.html#sd"><span class="id" title="variable">sd</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">dd</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="framework.scopes.html#ddataofScope"><span class="id" title="method">ddataofScope</span></a> <a class="idref" href="framework.scopes.html#sd"><span class="id" title="variable">sd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="framework.scopes.html#dd"><span class="id" title="variable">dd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> (<a class="idref" href="framework.maps.html#keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="framework.scopes.html#dd"><span class="id" title="variable">dd</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [? [? [? [? ?]]]]; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [? [? [? [? [? ?]]]]]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="framework.scopes.html#rlookup"><span class="id" title="definition">rlookup</span></a></span> <span class="inlinecode"><a class="idref" href="framework.scopes.html#r"><span class="id" title="variable">r</span></a></span> <span class="inlinecode"><a class="idref" href="framework.scopes.html#p"><span class="id" title="variable">p</span></a></span> <span class="inlinecode"><a class="idref" href="framework.scopes.html#s'"><span class="id" title="variable">s'</span></a></span> <span class="inlinecode"><a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a></span> means that reference <span class="inlinecode"><a class="idref" href="framework.scopes.html#r"><span class="id" title="variable">r</span></a></span> via path <span class="inlinecode"><a class="idref" href="framework.scopes.html#p"><span class="id" title="variable">p</span></a></span> leads
     to scope <span class="inlinecode"><a class="idref" href="framework.scopes.html#s'"><span class="id" title="variable">s'</span></a></span> and declaration <span class="inlinecode"><a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a></span>. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="rlookup"><span class="id" title="definition">rlookup</span></a> (<span class="id" title="var">r</span>: <a class="idref" href="framework.scopes.html#R"><span class="id" title="inductive">R</span></a>) (<span class="id" title="var">p</span>: <a class="idref" href="framework.scopes.html#path"><span class="id" title="inductive">path</span></a>) (<span class="id" title="var">s'</span>: <a class="idref" href="framework.scopes.html#ScopeId"><span class="id" title="definition">ScopeId</span></a>) (<span class="id" title="var">d'</span>: <a class="idref" href="framework.scopes.html#D"><span class="id" title="inductive">D</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="framework.scopes.html#scopeofRefP"><span class="id" title="definition">scopeofRefP</span></a> <a class="idref" href="framework.scopes.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="framework.scopes.html#pathofRefP"><span class="id" title="definition">pathofRefP</span></a> <a class="idref" href="framework.scopes.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="framework.scopes.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="framework.scopes.html#slookup"><span class="id" title="method">slookup</span></a> <a class="idref" href="framework.scopes.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="framework.scopes.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="framework.scopes.html#s'"><span class="id" title="variable">s'</span></a> <a class="idref" href="framework.scopes.html#d'"><span class="id" title="variable">d'</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="rlookupDet"><span class="id" title="lemma">rlookupDet</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">r</span> <span class="id" title="var">p</span> <span class="id" title="var">s'</span> <span class="id" title="var">d'</span> <span class="id" title="var">p'</span> <span class="id" title="var">s''</span> <span class="id" title="var">d''</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#rlookup"><span class="id" title="definition">rlookup</span></a> <a class="idref" href="framework.scopes.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="framework.scopes.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="framework.scopes.html#s'"><span class="id" title="variable">s'</span></a> <a class="idref" href="framework.scopes.html#d'"><span class="id" title="variable">d'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#rlookup"><span class="id" title="definition">rlookup</span></a> <a class="idref" href="framework.scopes.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="framework.scopes.html#p'"><span class="id" title="variable">p'</span></a> <a class="idref" href="framework.scopes.html#s''"><span class="id" title="variable">s''</span></a> <a class="idref" href="framework.scopes.html#d''"><span class="id" title="variable">d''</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.scopes.html#p'"><span class="id" title="variable">p'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="framework.scopes.html#s'"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.scopes.html#s''"><span class="id" title="variable">s''</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="framework.scopes.html#d'"><span class="id" title="variable">d'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.scopes.html#d''"><span class="id" title="variable">d''</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">destruct</span> 1 <span class="id" title="keyword">as</span> [? [? [? ?]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="framework.scopes.html#scopeofRefDet"><span class="id" title="lemma">scopeofRefDet</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="framework.scopes.html#pathofRefDet"><span class="id" title="lemma">pathofRefDet</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="framework.scopes.html#slookupDet"><span class="id" title="lemma">slookupDet</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> [? ?]; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="framework.scopes.html#LookupPredicates"><span class="id" title="section">LookupPredicates</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab6"></a><h1 class="section">Scope Graphs with Associated scopes and Types.</h1>

<div class="paragraph"> </div>

 Here we specialize declaration data to be optional associated
scope and type. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a name="RGATProperties"><span class="id" title="section">RGATProperties</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">T</span>: <span class="id" title="keyword">Type</span>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="AT"><span class="id" title="definition">AT</span></a> := (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="framework.scopes.html#ScopeId"><span class="id" title="definition">ScopeId</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="framework.scopes.html#RGATProperties.T"><span class="id" title="variable">T</span></a>)%<span class="id" title="var">type</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">G</span> : <a class="idref" href="framework.scopes.html#Graph"><span class="id" title="class">Graph</span></a> <a class="idref" href="framework.scopes.html#AT"><span class="id" title="definition">AT</span></a>}.<br/>

<br/>
</div>

<div class="doc">
<a name="lab7"></a><h2 class="section">Types</h2>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="typofDecl"><span class="id" title="inductive">typofDecl</span></a> (<span class="id" title="var">d</span>: <a class="idref" href="framework.scopes.html#D"><span class="id" title="inductive">D</span></a>) (<span class="id" title="var">t</span>: <a class="idref" href="framework.scopes.html#RGATProperties.T"><span class="id" title="variable">T</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="typofDecl_"><span class="id" title="constructor">typofDecl_</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">dd</span> : (<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="framework.scopes.html#ScopeId"><span class="id" title="definition">ScopeId</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="framework.scopes.html#RGATProperties.T"><span class="id" title="variable">T</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#assocData"><span class="id" title="inductive">assocData</span></a> <span class="id" title="var">d</span> <a class="idref" href="framework.scopes.html#dd"><span class="id" title="variable">dd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="framework.scopes.html#dd"><span class="id" title="variable">dd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#typofDecl"><span class="id" title="inductive">typofDecl</span></a> <span class="id" title="var">d</span> <span class="id" title="var">t</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="typofDeclDet"><span class="id" title="lemma">typofDeclDet</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">d</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#typofDecl"><span class="id" title="inductive">typofDecl</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="framework.scopes.html#t1"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#typofDecl"><span class="id" title="inductive">typofDecl</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="framework.scopes.html#t2"><span class="id" title="variable">t2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#t1"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.scopes.html#t2"><span class="id" title="variable">t2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="framework.scopes.html#assocDataDet"><span class="id" title="lemma">assocDataDet</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="typofDecls"><span class="id" title="definition">typofDecls</span></a> (<span class="id" title="var">ds</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="framework.scopes.html#D"><span class="id" title="inductive">D</span></a>) (<span class="id" title="var">ts</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="framework.scopes.html#RGATProperties.T"><span class="id" title="variable">T</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Lists.List.html#Forall2"><span class="id" title="inductive">Forall2</span></a> <a class="idref" href="framework.scopes.html#typofDecl"><span class="id" title="inductive">typofDecl</span></a> <a class="idref" href="framework.scopes.html#ds"><span class="id" title="variable">ds</span></a> <a class="idref" href="framework.scopes.html#ts"><span class="id" title="variable">ts</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="typofDeclsDet"><span class="id" title="lemma">typofDeclsDet</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">ds</span> <span class="id" title="var">t1s</span> <span class="id" title="var">t2s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#typofDecls"><span class="id" title="definition">typofDecls</span></a> <a class="idref" href="framework.scopes.html#ds"><span class="id" title="variable">ds</span></a> <a class="idref" href="framework.scopes.html#t1s"><span class="id" title="variable">t1s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="framework.scopes.html#typofDecls"><span class="id" title="definition">typofDecls</span></a> <a class="idref" href="framework.scopes.html#ds"><span class="id" title="variable">ds</span></a> <a class="idref" href="framework.scopes.html#t2s"><span class="id" title="variable">t2s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="framework.scopes.html#t1s"><span class="id" title="variable">t1s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.scopes.html#t2s"><span class="id" title="variable">t2s</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ds</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="framework.scopes.html#typofDeclDet"><span class="id" title="lemma">typofDeclDet</span></a>, <span class="id" title="var">IHds</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab8"></a><h2 class="section">Associated scopes</h2>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="assocScope"><span class="id" title="inductive">assocScope</span></a> (<span class="id" title="var">d</span>: <a class="idref" href="framework.scopes.html#D"><span class="id" title="inductive">D</span></a>) (<span class="id" title="var">s'</span>: <a class="idref" href="framework.scopes.html#ScopeId"><span class="id" title="definition">ScopeId</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="assocScope_"><span class="id" title="constructor">assocScope_</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">dd</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#assocData"><span class="id" title="inductive">assocData</span></a> <span class="id" title="var">d</span> <a class="idref" href="framework.scopes.html#dd"><span class="id" title="variable">dd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">s'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="framework.scopes.html#dd"><span class="id" title="variable">dd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#assocScope"><span class="id" title="inductive">assocScope</span></a> <span class="id" title="var">d</span> <span class="id" title="var">s'</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="assocScopeDet"><span class="id" title="lemma">assocScopeDet</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">d</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#assocScope"><span class="id" title="inductive">assocScope</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="framework.scopes.html#s1"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#assocScope"><span class="id" title="inductive">assocScope</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="framework.scopes.html#s2"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#s1"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.scopes.html#s2"><span class="id" title="variable">s2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="framework.scopes.html#assocDataDet"><span class="id" title="lemma">assocDataDet</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H3</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="assocScopeofRef"><span class="id" title="definition">assocScopeofRef</span></a> <span class="id" title="var">r</span> <span class="id" title="var">s''</span> : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">p'</span> <span class="id" title="var">s'</span> <span class="id" title="var">d</span><a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="framework.scopes.html#rlookup"><span class="id" title="definition">rlookup</span></a> <a class="idref" href="framework.scopes.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="framework.scopes.html#p'"><span class="id" title="variable">p'</span></a> <a class="idref" href="framework.scopes.html#s'"><span class="id" title="variable">s'</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="framework.scopes.html#assocScope"><span class="id" title="inductive">assocScope</span></a> <a class="idref" href="framework.scopes.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="framework.scopes.html#s''"><span class="id" title="variable">s''</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="assocScopeofRefDet"><span class="id" title="lemma">assocScopeofRefDet</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">r</span> <span class="id" title="var">s'</span> <span class="id" title="var">s''</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#assocScopeofRef"><span class="id" title="definition">assocScopeofRef</span></a> <a class="idref" href="framework.scopes.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="framework.scopes.html#s'"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#assocScopeofRef"><span class="id" title="definition">assocScopeofRef</span></a> <a class="idref" href="framework.scopes.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="framework.scopes.html#s''"><span class="id" title="variable">s''</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="framework.scopes.html#s'"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="framework.scopes.html#s''"><span class="id" title="variable">s''</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [? [? [? [<span class="id" title="var">DR1</span> <span class="id" title="var">ASC1</span>]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [? [? [? [<span class="id" title="var">DR2</span> <span class="id" title="var">ASC2</span>]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="framework.scopes.html#rlookupDet"><span class="id" title="lemma">rlookupDet</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">DR1</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">DR1</span> <span class="id" title="keyword">as</span> [? [? ?]]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="framework.scopes.html#assocScopeDet"><span class="id" title="lemma">assocScopeDet</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">ASC1</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="framework.scopes.html#RGATProperties"><span class="id" title="section">RGATProperties</span></a>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>